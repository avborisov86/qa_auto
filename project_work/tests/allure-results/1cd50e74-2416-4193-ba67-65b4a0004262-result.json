{"name": "Проверка: есть возможность закрыть информационное сообщение (alert) после добавления товара в корзину", "status": "failed", "statusDetails": {"message": "AssertionError: Element ('css selector', \"div[class='alert alert-success alert-dismissible']\") is on the page", "trace": "self = <project_work.page_objects.ShoppingCart.Cart object at 0x7fe69fe77d30>\nlocator = ('css selector', \"div[class='alert alert-success alert-dismissible']\")\ntime = 5\n\n    @allure.step(\"Verifying if the element {locator} is not displayed\")\n    def verify_element_is_absent(self, locator: tuple, time=5):\n        self.logger.info(\"Verifying if element {} is not displayed\".format(locator))\n        # if WebDriverWait(self.browser, time).until_not(EC.visibility_of_element_located(locator)):\n        #     return True\n        # else:\n        #     return False\n        try:\n>           return WebDriverWait(self.browser, time).until_not(EC.invisibility_of_element(locator))\n\n../page_objects/BasePage.py:55: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <selenium.webdriver.support.wait.WebDriverWait (session=\"18541bc14edf58c57a7d44e5e535de99\")>\nmethod = <function invisibility_of_element_located.<locals>._predicate at 0x7fe69fea8700>\nmessage = ''\n\n    def until_not(self, method, message=''):\n        \"\"\"Calls the method provided with the driver as an argument until the \\\n        return value evaluates to ``False``.\n    \n        :param method: callable(WebDriver)\n        :param message: optional message for :exc:`TimeoutException`\n        :returns: the result of the last call to `method`, or\n                  ``True`` if `method` has raised one of the ignored exceptions\n        :raises: :exc:`selenium.common.exceptions.TimeoutException` if timeout occurs\n        \"\"\"\n        end_time = time.time() + self._timeout\n        while True:\n            try:\n                value = method(self._driver)\n                if not value:\n                    return value\n            except InvalidSelectorException as e:\n                raise e\n            except self._ignored_exceptions:\n                return True\n            time.sleep(self._poll)\n            if time.time() > end_time:\n                break\n>       raise TimeoutException(message)\nE       selenium.common.exceptions.TimeoutException: Message:\n\n../../../qa_api_python/venv3/lib/python3.8/site-packages/selenium/webdriver/support/wait.py:114: TimeoutException\n\nDuring handling of the above exception, another exception occurred:\n\nbrowser = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"18541bc14edf58c57a7d44e5e535de99\")>\nlocal_base_url = 'http://127.0.0.1:8081/'\n\n    @allure.title(\"Проверка: есть возможность закрыть информационное сообщение (alert) после добавления товара в корзину\")\n    @allure.feature(\"Реализация функционала 'корзины' в интернет-магазине\")\n    @allure.story(\"Клиент может закрыть информационное сообщение о добавлении в корзину товара\")\n    @allure.description(\"\"\"\n        На главной странице ИМ http://127.0.0.1:8081/ открываем каталог mp3 плееров, добавляем mp3 плеер и\n        проверяем, что пользователь может закрыть информационное сообщение о добавлении в корзину товара)'\n    \"\"\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    def test6_close_alert_after_prod_add_to_cart(browser, local_base_url):\n        main_page = Cart(browser, local_base_url)\n        main_page.go_to_site()\n        main_page.show_all_mp3()\n        main_page.simple_click(Cart.SECOND_MP3_PRODUCT)\n        main_page.simple_click(Cart.CLOSE_ALERT_BTN)\n>       result = main_page.verify_element_is_absent(Cart.ADD_ALERT)\n\ntest_cart.py:150: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <project_work.page_objects.ShoppingCart.Cart object at 0x7fe69fe77d30>\nlocator = ('css selector', \"div[class='alert alert-success alert-dismissible']\")\ntime = 5\n\n    @allure.step(\"Verifying if the element {locator} is not displayed\")\n    def verify_element_is_absent(self, locator: tuple, time=5):\n        self.logger.info(\"Verifying if element {} is not displayed\".format(locator))\n        # if WebDriverWait(self.browser, time).until_not(EC.visibility_of_element_located(locator)):\n        #     return True\n        # else:\n        #     return False\n        try:\n            return WebDriverWait(self.browser, time).until_not(EC.invisibility_of_element(locator))\n        except TimeoutException:\n>           raise AssertionError(f\"Element {locator} is on the page\")\nE           AssertionError: Element ('css selector', \"div[class='alert alert-success alert-dismissible']\") is on the page\n\n../page_objects/BasePage.py:57: AssertionError"}, "description": " \n    На главной странице ИМ http://127.0.0.1:8081/ открываем каталог mp3 плееров, добавляем mp3 плеер и \n    проверяем, что пользователь может закрыть информационное сообщение о добавлении в корзину товара)'\n", "steps": [{"name": "Going to page", "status": "passed", "start": 1641749646313, "stop": 1641749646887}, {"name": "Opening all mp3 products page through main menu", "status": "passed", "steps": [{"name": "Clicking the element (without mouse moving)", "status": "passed", "steps": [{"name": "Looking for the unique element ('css selector', \"#menu > div[class='collapse navbar-collapse navbar-ex1-collapse'] > ul > li:nth-child(8)\") on the page", "status": "passed", "parameters": [{"name": "locator", "value": "('css selector', \"#menu > div[class='collapse navbar-collapse navbar-ex1-collapse'] > ul > li:nth-child(8)\")"}, {"name": "time", "value": "10"}], "start": 1641749646888, "stop": 1641749646906}], "parameters": [{"name": "locator", "value": "('css selector', \"#menu > div[class='collapse navbar-collapse navbar-ex1-collapse'] > ul > li:nth-child(8)\")"}], "start": 1641749646888, "stop": 1641749646935}, {"name": "Moving the mouse to the element and clicking it", "status": "passed", "steps": [{"name": "Looking for the unique element ('css selector', \"#menu > div[class='collapse navbar-collapse navbar-ex1-collapse'] > ul > li:nth-child(8) > div > a\") on the page", "status": "passed", "parameters": [{"name": "locator", "value": "('css selector', \"#menu > div[class='collapse navbar-collapse navbar-ex1-collapse'] > ul > li:nth-child(8) > div > a\")"}, {"name": "time", "value": "10"}], "start": 1641749646935, "stop": 1641749646952}], "parameters": [{"name": "locator", "value": "('css selector', \"#menu > div[class='collapse navbar-collapse navbar-ex1-collapse'] > ul > li:nth-child(8) > div > a\")"}, {"name": "time", "value": "0.5"}], "start": 1641749646935, "stop": 1641749648432}], "start": 1641749646887, "stop": 1641749648432}, {"name": "Clicking the element (without mouse moving)", "status": "passed", "steps": [{"name": "Looking for the unique element ('css selector', \"#content > div:nth-child(8) > div:nth-child(2) > div > div:nth-child(2) > div[class='button-group'] > button\") on the page", "status": "passed", "parameters": [{"name": "locator", "value": "('css selector', \"#content > div:nth-child(8) > div:nth-child(2) > div > div:nth-child(2) > div[class='button-group'] > button\")"}, {"name": "time", "value": "10"}], "start": 1641749648433, "stop": 1641749648447}], "parameters": [{"name": "locator", "value": "('css selector', \"#content > div:nth-child(8) > div:nth-child(2) > div > div:nth-child(2) > div[class='button-group'] > button\")"}], "start": 1641749648432, "stop": 1641749648470}, {"name": "Clicking the element (without mouse moving)", "status": "passed", "steps": [{"name": "Looking for the unique element ('css selector', \"div[class='alert alert-success alert-dismissible'] > button\") on the page", "status": "passed", "parameters": [{"name": "locator", "value": "('css selector', \"div[class='alert alert-success alert-dismissible'] > button\")"}, {"name": "time", "value": "10"}], "start": 1641749648471, "stop": 1641749648994}], "parameters": [{"name": "locator", "value": "('css selector', \"div[class='alert alert-success alert-dismissible'] > button\")"}], "start": 1641749648471, "stop": 1641749649016}, {"name": "Verifying if the element ('css selector', \"div[class='alert alert-success alert-dismissible']\") is not displayed", "status": "failed", "statusDetails": {"message": "AssertionError: Element ('css selector', \"div[class='alert alert-success alert-dismissible']\") is on the page\n", "trace": "  File \"/Users/avboris/Develop/qa_api_python/venv3/lib/python3.8/site-packages/allure_commons/_allure.py\", line 172, in impl\n    return func(*a, **kw)\n  File \"/Users/avboris/Develop/qa_auto/project_work/page_objects/BasePage.py\", line 57, in verify_element_is_absent\n    raise AssertionError(f\"Element {locator} is on the page\")\n"}, "parameters": [{"name": "locator", "value": "('css selector', \"div[class='alert alert-success alert-dismissible']\")"}, {"name": "time", "value": "5"}], "start": 1641749649016, "stop": 1641749654100}], "attachments": [{"name": "screenshot", "source": "5500780d-838f-45fc-a182-41c66a2809fc-attachment.png", "type": "image/png"}, {"name": "log", "source": "89a8ad9f-316c-4033-8f65-35f9bd1f4cab-attachment.txt", "type": "text/plain"}], "start": 1641749646313, "stop": 1641749654101, "uuid": "a8cfd96f-aac0-49f0-a182-eee2f66fc0d8", "historyId": "975bf8db6ea43640dcda8dbe1b4433e7", "testCaseId": "4aed4091fbc7e1ec833088e352410472", "fullName": "project_work.tests.test_cart#test6_close_alert_after_prod_add_to_cart", "labels": [{"name": "story", "value": "Клиент может закрыть информационное сообщение о добавлении в корзину товара"}, {"name": "severity", "value": "critical"}, {"name": "feature", "value": "Реализация функционала 'корзины' в интернет-магазине"}, {"name": "parentSuite", "value": "project_work.tests"}, {"name": "suite", "value": "test_cart"}, {"name": "host", "value": "MacBook-Pro-Anton.local"}, {"name": "thread", "value": "33156-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "project_work.tests.test_cart"}]}