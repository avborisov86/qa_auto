{"name": "Проверка: есть возможность закрыть информационное сообщение (alert) после добавления товара в корзину", "status": "failed", "statusDetails": {"message": "AssertionError: Element ('css selector', \"div[class='alert alert-success alert-dismissible']\") is on the page", "trace": "self = <project_work.page_objects.ShoppingCart.Cart object at 0x7fb43d65fa60>\nlocator = ('css selector', \"div[class='alert alert-success alert-dismissible']\")\ntime = 5\n\n    @allure.step(\"Verifying if the element {locator} is not displayed\")\n    def verify_element_is_absent(self, locator: tuple, time=5):\n        self.logger.info(\"Verifying if element {} is not displayed\".format(locator))\n        # if WebDriverWait(self.browser, time).until_not(EC.visibility_of_element_located(locator)):\n        #     return True\n        # else:\n        #     return False\n        try:\n>           return WebDriverWait(self.browser, time).until_not(EC.invisibility_of_element(locator))\n\n../page_objects/BasePage.py:55: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <selenium.webdriver.support.wait.WebDriverWait (session=\"28cf8503b9c3373da56a79795932c3ff\")>\nmethod = <function invisibility_of_element_located.<locals>._predicate at 0x7fb43d69a700>\nmessage = ''\n\n    def until_not(self, method, message=''):\n        \"\"\"Calls the method provided with the driver as an argument until the \\\n        return value evaluates to ``False``.\n    \n        :param method: callable(WebDriver)\n        :param message: optional message for :exc:`TimeoutException`\n        :returns: the result of the last call to `method`, or\n                  ``True`` if `method` has raised one of the ignored exceptions\n        :raises: :exc:`selenium.common.exceptions.TimeoutException` if timeout occurs\n        \"\"\"\n        end_time = time.time() + self._timeout\n        while True:\n            try:\n                value = method(self._driver)\n                if not value:\n                    return value\n            except InvalidSelectorException as e:\n                raise e\n            except self._ignored_exceptions:\n                return True\n            time.sleep(self._poll)\n            if time.time() > end_time:\n                break\n>       raise TimeoutException(message)\nE       selenium.common.exceptions.TimeoutException: Message:\n\n../../../qa_api_python/venv3/lib/python3.8/site-packages/selenium/webdriver/support/wait.py:114: TimeoutException\n\nDuring handling of the above exception, another exception occurred:\n\nbrowser = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"28cf8503b9c3373da56a79795932c3ff\")>\nlocal_base_url = 'http://127.0.0.1:8081/'\n\n    @allure.title(\"Проверка: есть возможность закрыть информационное сообщение (alert) после добавления товара в корзину\")\n    @allure.feature(\"Реализация функционала 'корзины' в интернет-магазине\")\n    @allure.story(\"Клиент может закрыть информационное сообщение о добавлении в корзину товара\")\n    @allure.description(\"\"\"\n        На главной странице ИМ http://127.0.0.1:8081/ открываем каталог mp3 плееров, добавляем mp3 плеер и\n        проверяем, что пользователь может закрыть информационное сообщение о добавлении в корзину товара)'\n    \"\"\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    def test6_close_alert_after_prod_add_to_cart(browser, local_base_url):\n        main_page = Cart(browser, local_base_url)\n        main_page.go_to_site()\n        main_page.show_all_mp3()\n        main_page.simple_click(Cart.SECOND_MP3_PRODUCT)\n        main_page.simple_click(Cart.CLOSE_ALERT_BTN)\n>       result = main_page.verify_element_is_absent(Cart.ADD_ALERT)\n\ntest_cart.py:150: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <project_work.page_objects.ShoppingCart.Cart object at 0x7fb43d65fa60>\nlocator = ('css selector', \"div[class='alert alert-success alert-dismissible']\")\ntime = 5\n\n    @allure.step(\"Verifying if the element {locator} is not displayed\")\n    def verify_element_is_absent(self, locator: tuple, time=5):\n        self.logger.info(\"Verifying if element {} is not displayed\".format(locator))\n        # if WebDriverWait(self.browser, time).until_not(EC.visibility_of_element_located(locator)):\n        #     return True\n        # else:\n        #     return False\n        try:\n            return WebDriverWait(self.browser, time).until_not(EC.invisibility_of_element(locator))\n        except TimeoutException:\n>           raise AssertionError(f\"Element {locator} is on the page\")\nE           AssertionError: Element ('css selector', \"div[class='alert alert-success alert-dismissible']\") is on the page\n\n../page_objects/BasePage.py:57: AssertionError"}, "description": " \n    На главной странице ИМ http://127.0.0.1:8081/ открываем каталог mp3 плееров, добавляем mp3 плеер и \n    проверяем, что пользователь может закрыть информационное сообщение о добавлении в корзину товара)'\n", "steps": [{"name": "Going to page", "status": "passed", "start": 1641749589530, "stop": 1641749590095}, {"name": "Opening all mp3 products page through main menu", "status": "passed", "steps": [{"name": "Clicking the element (without mouse moving)", "status": "passed", "steps": [{"name": "Looking for the unique element ('css selector', \"#menu > div[class='collapse navbar-collapse navbar-ex1-collapse'] > ul > li:nth-child(8)\") on the page", "status": "passed", "parameters": [{"name": "locator", "value": "('css selector', \"#menu > div[class='collapse navbar-collapse navbar-ex1-collapse'] > ul > li:nth-child(8)\")"}, {"name": "time", "value": "10"}], "start": 1641749590096, "stop": 1641749590114}], "parameters": [{"name": "locator", "value": "('css selector', \"#menu > div[class='collapse navbar-collapse navbar-ex1-collapse'] > ul > li:nth-child(8)\")"}], "start": 1641749590096, "stop": 1641749590201}, {"name": "Moving the mouse to the element and clicking it", "status": "passed", "steps": [{"name": "Looking for the unique element ('css selector', \"#menu > div[class='collapse navbar-collapse navbar-ex1-collapse'] > ul > li:nth-child(8) > div > a\") on the page", "status": "passed", "parameters": [{"name": "locator", "value": "('css selector', \"#menu > div[class='collapse navbar-collapse navbar-ex1-collapse'] > ul > li:nth-child(8) > div > a\")"}, {"name": "time", "value": "10"}], "start": 1641749590202, "stop": 1641749590218}], "parameters": [{"name": "locator", "value": "('css selector', \"#menu > div[class='collapse navbar-collapse navbar-ex1-collapse'] > ul > li:nth-child(8) > div > a\")"}, {"name": "time", "value": "0.5"}], "start": 1641749590201, "stop": 1641749591709}], "start": 1641749590095, "stop": 1641749591709}, {"name": "Clicking the element (without mouse moving)", "status": "passed", "steps": [{"name": "Looking for the unique element ('css selector', \"#content > div:nth-child(8) > div:nth-child(2) > div > div:nth-child(2) > div[class='button-group'] > button\") on the page", "status": "passed", "parameters": [{"name": "locator", "value": "('css selector', \"#content > div:nth-child(8) > div:nth-child(2) > div > div:nth-child(2) > div[class='button-group'] > button\")"}, {"name": "time", "value": "10"}], "start": 1641749591709, "stop": 1641749591723}], "parameters": [{"name": "locator", "value": "('css selector', \"#content > div:nth-child(8) > div:nth-child(2) > div > div:nth-child(2) > div[class='button-group'] > button\")"}], "start": 1641749591709, "stop": 1641749591746}, {"name": "Clicking the element (without mouse moving)", "status": "passed", "steps": [{"name": "Looking for the unique element ('css selector', \"div[class='alert alert-success alert-dismissible'] > button\") on the page", "status": "passed", "parameters": [{"name": "locator", "value": "('css selector', \"div[class='alert alert-success alert-dismissible'] > button\")"}, {"name": "time", "value": "10"}], "start": 1641749591746, "stop": 1641749592270}], "parameters": [{"name": "locator", "value": "('css selector', \"div[class='alert alert-success alert-dismissible'] > button\")"}], "start": 1641749591746, "stop": 1641749592293}, {"name": "Verifying if the element ('css selector', \"div[class='alert alert-success alert-dismissible']\") is not displayed", "status": "failed", "statusDetails": {"message": "AssertionError: Element ('css selector', \"div[class='alert alert-success alert-dismissible']\") is on the page\n", "trace": "  File \"/Users/avboris/Develop/qa_api_python/venv3/lib/python3.8/site-packages/allure_commons/_allure.py\", line 172, in impl\n    return func(*a, **kw)\n  File \"/Users/avboris/Develop/qa_auto/project_work/page_objects/BasePage.py\", line 57, in verify_element_is_absent\n    raise AssertionError(f\"Element {locator} is on the page\")\n"}, "parameters": [{"name": "locator", "value": "('css selector', \"div[class='alert alert-success alert-dismissible']\")"}, {"name": "time", "value": "5"}], "start": 1641749592293, "stop": 1641749597392}], "attachments": [{"name": "screenshot", "source": "2613b1a4-5f5f-4b2d-8077-cde4fb8cd14a-attachment.png", "type": "image/png"}, {"name": "log", "source": "962a85cb-5380-4556-a7bc-fddbd1624171-attachment.txt", "type": "text/plain"}], "start": 1641749589530, "stop": 1641749597393, "uuid": "5e19416e-73bf-4b4a-91dc-fa2c1e1d7777", "historyId": "975bf8db6ea43640dcda8dbe1b4433e7", "testCaseId": "4aed4091fbc7e1ec833088e352410472", "fullName": "project_work.tests.test_cart#test6_close_alert_after_prod_add_to_cart", "labels": [{"name": "severity", "value": "critical"}, {"name": "feature", "value": "Реализация функционала 'корзины' в интернет-магазине"}, {"name": "story", "value": "Клиент может закрыть информационное сообщение о добавлении в корзину товара"}, {"name": "parentSuite", "value": "project_work.tests"}, {"name": "suite", "value": "test_cart"}, {"name": "host", "value": "MacBook-Pro-Anton.local"}, {"name": "thread", "value": "33118-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "project_work.tests.test_cart"}]}